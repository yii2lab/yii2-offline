## Описание

утилита по переводу сайта в режим технических работ

## Ссылки

* [Руководство](guide/ru/README.md)
* [Установка](guide/ru/install.md)


Режим оффлайн (offline)
===

## Описание

Режим оффлайн - это выключение сайта на некоторое время.
При включенном режиме пользователи увидят сообщение, наподобие:

    Сайт временно недоступен
    Проводятся профилактические работы. Просим Вас зайти через несколько минут.

Режим оффлайн включают в следующих случаях:

* при деплое
* при миграциях в БД
* при устранении аварийных ситуаций

В АПИ-приложении приходит статус 500 и такое тело:

```json
{
    "title": "Сайт временно недоступен",
    "message": "Проводятся профилактические работы. Просим Вас зайти через несколько минут."
}
```

Страница на стороне пользователя периодически обновляется, 
так что пользователь сразу увидит, когда сайт заработает.

## Установка

Устанавливаем зависимость:

```
composer require yii2module/yii2-offline
```

Объявляем модуль:

```php
return [
	'modules' => [
		// ...
		'fixtures' => 'yii2module\offline\Module',
		// ...
	],
];
```

## Конфигурация

В конфиге params можно указать какие приложения необходимо исключить.

```
    'offline' => [
        'exclude' => [
            CONSOLE,
            BACKEND,
        ],
    ],
```

Это означает, что при включенном оффлайн режиме, 
приложения консоли и админки продолжат работать в штатном режиме.
Остальные приложения будут выдавать сообщение о недоступности сайта.

## Документация

Для выбора режима

```
php yii offline
```
